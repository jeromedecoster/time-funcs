const fn = require('../durastamp')
const test = require('tape')

function equal(t, data, expected, decimal, pad) {
  t.equal(fn(data, decimal, pad), expected, `sec: ${data} â†’ ${expected}`)
}

test('durastamp default behavior', function (t) {

  // starts with days
  equal(t, 8640000,   '100:00:00:00') // 8640000 = 100d
  equal(t, 864000,    '10:00:00:00')  // 864000  = 10d
  equal(t, 86400,     '1:00:00:00')   // 86400   = 1d
  equal(t, 90000,     '1:01:00:00')   // 90000   = 1d 1h
  equal(t, 122400,    '1:10:00:00')   // 122400  = 1d 10h
  equal(t, 86460,     '1:00:01:00')   // 86460   = 1d 1m
  equal(t, 87000,     '1:00:10:00')   // 87000   = 1d 10m
  equal(t, 86401,     '1:00:00:01')   // 86401   = 1d 1s
  equal(t, 86401.1,   '1:00:00:01')   // 86401   = 1d 1s 100ms
  equal(t, 86401.01,  '1:00:00:01')   // 86401   = 1d 1s 10ms
  equal(t, 86401.001, '1:00:00:01')   // 86401   = 1d 1s 1ms
  equal(t, 86410,     '1:00:00:10')   // 86410   = 1d 10s
  equal(t, 90061,     '1:01:01:01')   // 90061   = 1d 1h 1m 1s
  equal(t, 900610,    '10:10:10:10')  // 900610  = 10d 10h 10m 10s

  // starts with hours
  equal(t, 3600,     '1:00:00')  // 3600    = 1h
  equal(t, 36000,    '10:00:00') // 36000   = 10h
  equal(t, 3660,     '1:01:00')  // 3660    = 1h 1m
  equal(t, 4200,     '1:10:00')  // 4200    = 1h 10m
  equal(t, 3601,     '1:00:01')  // 3601    = 1h 1s
  equal(t, 3601.1,   '1:00:01')  // 3601    = 1h 1s 100ms
  equal(t, 3601.01,  '1:00:01')  // 3601    = 1h 1s 10ms
  equal(t, 3601.001, '1:00:01')  // 3601    = 1h 1s 1ms
  equal(t, 3610,     '1:00:10')  // 3610    = 1h 10s
  equal(t, 86399,    '23:59:59') // 86399   = 23h 59m 59s

  // starts with minutes
  equal(t, 60,     '1:00')       // 60      = 1m
  equal(t, 61,     '1:01')       // 60      = 1m 1s
  equal(t, 61.1,   '1:01')       // 60      = 1m 1s 100ms
  equal(t, 61.01,  '1:01')       // 60      = 1m 1s 10ms
  equal(t, 61.001, '1:01')       // 60      = 1m 1s 1ms
  equal(t, 600,    '10:00')      // 600     = 10m
  equal(t, 601,    '10:01')      // 601     = 10m 1s
  equal(t, 610,    '10:10')      // 610     = 10m 10s
  equal(t, 0.001,  '0:00')       // 0       = 0s
  equal(t, 0.01,   '0:00')       // 0       = 0s
  equal(t, 0.1,    '0:00')       // 0       = 0s
  equal(t, 0,      '0:00')       // 0       = 0s
  equal(t, 1,      '0:01')       // 1       = 1s
  equal(t, 10,     '0:10')       // 10      = 10s
  equal(t, 59,     '0:59')       // 59      = 59s
  equal(t, 59.1,   '0:59')       // 59      = 59s 100ms
  equal(t, 59.01,  '0:59')       // 59      = 59s 10ms
  equal(t, 59.001, '0:59')       // 59      = 59s 1ms
  t.end()
})

test('durastamp with pad = true', function (t) {

  // starts with days
  equal(t, 900610,  '10:10:10:10', 0, true)  // 900610  = 10d 10h 10m 10s
  equal(t, 90061,   '1:01:01:01', 0, true)   // 90061   = 1d 1h 1m 1s

  // starts with hours
  equal(t, 36000, '10:00:00', 0, true)       // 36000   = 10h
  equal(t, 3600,  '01:00:00', 0, true)       // 3600    = 1h

  // starts with minutes
  equal(t, 600, '10:00', 0, true)            // 3600    = 10m
  equal(t, 60,  '01:00', 0, true)            // 3600    = 1m
  t.end()
})

test('durastamp with decimal', function (t) {

  // starts with days
  equal(t, 86401.1,    '1:00:00:01',     0) // 86401.1    = 1d 1s 100ms
  equal(t, 86401.1,    '1:00:00:01',     4) // 86401.1    = 1d 1s 100ms
  equal(t, 86401,      '1:00:00:01.0',   1) // 86401      = 1d 1s
  equal(t, 86401,      '1:00:00:01.00',  2) // 86401      = 1d 1s
  equal(t, 86401,      '1:00:00:01.000', 3) // 86401      = 1d 1s
  equal(t, 86401,      '1:00:00:01',     4) // 86401      = 1d 1s
  equal(t, 86401.1,    '1:00:00:01.1',   1) // 86401.1    = 1d 1s 100ms
  equal(t, 86401.1,    '1:00:00:01.10',  2) // 86401.1    = 1d 1s 100ms
  equal(t, 86401.1,    '1:00:00:01.100', 3) // 86401.1    = 1d 1s 100ms
  equal(t, 86401.01,   '1:00:00:01.0',   1) // 86401.01   = 1d 1s 10ms
  equal(t, 86401.01,   '1:00:00:01.01',  2) // 86401.01   = 1d 1s 10ms
  equal(t, 86401.01,   '1:00:00:01.010', 3) // 86401.01   = 1d 1s 10ms
  equal(t, 86401.001,  '1:00:00:01.0',   1) // 86401.001  = 1d 1s 1ms
  equal(t, 86401.001,  '1:00:00:01.00',  2) // 86401.001  = 1d 1s 1ms
  equal(t, 86401.001,  '1:00:00:01.001', 3) // 86401.001  = 1d 1s 1ms
  equal(t, 86401.0001, '1:00:00:01.0',   1) // 86401.0001 = 1d 1s 0.1ms
  equal(t, 86401.0001, '1:00:00:01.00',  2) // 86401.0001 = 1d 1s 0.1ms
  equal(t, 86401.0001, '1:00:00:01.000', 3) // 86401.0001 = 1d 1s 0.1ms

  // starts with hours
  equal(t, 36000.1,   '10:00:00',     0) // 36000.1   = 10h 100ms
  equal(t, 36000.1,   '10:00:00',     4) // 36000.1   = 10h 100ms
  equal(t, 36000,     '10:00:00.0',   1) // 36000     = 10h
  equal(t, 36000,     '10:00:00.00',  2) // 36000     = 10h
  equal(t, 36000,     '10:00:00.000', 3) // 36000     = 10h
  equal(t, 36000,     '10:00:00',     4) // 36000     = 10h
  equal(t, 36000.1,   '10:00:00.1',   1) // 36000.1   = 10h 100ms
  equal(t, 36000.1,   '10:00:00.10',  2) // 36000.1   = 10h 100ms
  equal(t, 36000.1,   '10:00:00.100', 3) // 36000.1   = 10h 100ms
  equal(t, 36000.01,  '10:00:00.0',   1) // 36000.01  = 10h 10ms
  equal(t, 36000.01,  '10:00:00.01',  2) // 36000.01  = 10h 10ms
  equal(t, 36000.01,  '10:00:00.010', 3) // 36000.01  = 10h 10ms
  equal(t, 36000.001, '10:00:00.0',   1) // 36000.001 = 10h 1ms
  equal(t, 36000.001, '10:00:00.00',  2) // 36000.001 = 10h 1ms
  equal(t, 36000.001, '10:00:00.001', 3) // 36000.001 = 10h 1ms

  // starts with minutes
  equal(t, 60.1,   '1:00',     0) // 60.1   = 1m 100ms
  equal(t, 60.1,   '1:00',     4) // 60.1   = 1m 100ms
  equal(t, 60.1,   '1:00.1',   1) // 60.1   = 1m 100ms
  equal(t, 60.1,   '1:00.10',  2) // 60.1   = 1m 100ms
  equal(t, 60.1,   '1:00.100', 3) // 60.1   = 1m 100ms
  equal(t, 60.01,  '1:00.0',   1) // 60.01  = 1m 10ms
  equal(t, 60.01,  '1:00.01',  2) // 60.01  = 1m 10ms
  equal(t, 60.01,  '1:00.010', 3) // 60.01  = 1m 10ms
  equal(t, 60.001, '1:00.0',   1) // 60.001 = 1m 1ms
  equal(t, 60.001, '1:00.00',  2) // 60.001 = 1m 1ms
  equal(t, 60.001, '1:00.001', 3) // 60.001 = 1m 1ms
  equal(t, 0.001,  '0:00.001', 3) // 0.001  = 1ms
  t.end()
})
